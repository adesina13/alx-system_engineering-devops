#!/bin/bash

# Define the custom bases
WATER_BASE=$(echo "$WATER" | fold -w1 | awk '!a[$0]++' | tr -d '\n')
STIR_BASE=$(echo "$STIR" | fold -w1 | awk '!a[$0]++' | tr -d '\n')
BESTCHOL_BASE="bestchol"

# Function to convert from any custom base to decimal
to_decimal() {
    local num="$1"
    local base="$2"
    local len=${#base}
    local dec=0
    local digit
    for ((i=0; i<${#num}; i++)); do
        digit="${num:i:1}"
        # position of digit in base
        pos=$(expr index "$base" "$digit" - 1)
        ((dec = dec * len + pos))
    done
    echo $dec
}

# Function to convert from decimal to custom base
from_decimal() {
    local num=$1
    local base=$2
    local len=${#base}
    local res=""
    local r
    while ((num > 0)); do
        r=$((num % len))
        res="${base:r:1}$res"
        ((num=num/len))
    done
    echo "$res"
}

# Convert WATER and STIR to decimal
dec_water=$(to_decimal "$WATER" "$WATER_BASE")
dec_stir=$(to_decimal "$STIR" "$STIR_BASE")

# Add them
sum=$((dec_water + dec_stir))

# Convert sum to BESTCHOL base
from_decimal $sum "$BESTCHOL_BASE"
